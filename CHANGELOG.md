### Changelog

All notable changes to this project will be documented in this file. Dates are displayed in UTC.

Generated by [`auto-changelog`](https://github.com/CookPete/auto-changelog).

#### [v4.8.2](https://github.com/DEFRA/water-abstraction-helpers/compare/v4.8.1...v4.8.2)

> 25 November 2022

- Add post version bump CHANGELOG hook [`#201`](https://github.com/DEFRA/water-abstraction-helpers/pull/201)
- Handle Stacktrace only errors [`#200`](https://github.com/DEFRA/water-abstraction-helpers/pull/200)
- Replace deprecated set-output cmd in GitHub CI [`#199`](https://github.com/DEFRA/water-abstraction-helpers/pull/199)
- Bump joi from 17.6.4 to 17.7.0 [`#198`](https://github.com/DEFRA/water-abstraction-helpers/pull/198)
- Bump joi from 17.6.3 to 17.6.4 [`#197`](https://github.com/DEFRA/water-abstraction-helpers/pull/197)
- Bump joi from 17.6.2 to 17.6.3 [`#193`](https://github.com/DEFRA/water-abstraction-helpers/pull/193)
- Rename test files from filename.js to filename.test.js [`#192`](https://github.com/DEFRA/water-abstraction-helpers/pull/192)
- Tidy up dependencies [`#184`](https://github.com/DEFRA/water-abstraction-helpers/pull/184)
- Fix `.git-blame-ignore-revs` [`#190`](https://github.com/DEFRA/water-abstraction-helpers/pull/190)
- Remove `pg-boss` [`#189`](https://github.com/DEFRA/water-abstraction-helpers/pull/189)
- Bump joi from 17.6.0 to 17.6.1 [`#188`](https://github.com/DEFRA/water-abstraction-helpers/pull/188)
- Reimplement `slugify` dependency [`#187`](https://github.com/DEFRA/water-abstraction-helpers/pull/187)
- Remove `glob` dependency [`#186`](https://github.com/DEFRA/water-abstraction-helpers/pull/186)
- Reimplement `deep-map` dependency [`#185`](https://github.com/DEFRA/water-abstraction-helpers/pull/185)
- Create `url-join` helper [`#183`](https://github.com/DEFRA/water-abstraction-helpers/pull/183)
- Bump pg from 8.7.3 to 8.8.0 [`#182`](https://github.com/DEFRA/water-abstraction-helpers/pull/182)
- Hide `standard` linting commit with `.git-blame-ignore-revs` [`#181`](https://github.com/DEFRA/water-abstraction-helpers/pull/181)
- Bump moment from 2.29.3 to 2.29.4 [`#180`](https://github.com/DEFRA/water-abstraction-helpers/pull/180)
- Tidy up package.json [`#179`](https://github.com/DEFRA/water-abstraction-helpers/pull/179)
- Make gitignore consistent with other projects [`#178`](https://github.com/DEFRA/water-abstraction-helpers/pull/178)
- Add dependabot.yml config file [`#177`](https://github.com/DEFRA/water-abstraction-helpers/pull/177)
- Apply consistent CI workflow [`#176`](https://github.com/DEFRA/water-abstraction-helpers/pull/176)
- Replacing es lint with standard js [`#175`](https://github.com/DEFRA/water-abstraction-helpers/pull/175)
- Update default branch to `main` [`df1f4ba`](https://github.com/DEFRA/water-abstraction-helpers/commit/df1f4ba88a98baef1ef211f3c38a3a563acb7eb1)

#### [v4.8.1](https://github.com/DEFRA/water-abstraction-helpers/compare/v4.8.0...v4.8.1)

> 30 May 2022

- 4.8.1 [`#174`](https://github.com/DEFRA/water-abstraction-helpers/pull/174)
- feat/water-3419 [`#173`](https://github.com/DEFRA/water-abstraction-helpers/pull/173)

#### [v4.8.0](https://github.com/DEFRA/water-abstraction-helpers/compare/v4.7.0...v4.8.0)

> 19 April 2022

- feat: update pg from 7 to 8 [`#172`](https://github.com/DEFRA/water-abstraction-helpers/pull/172)

#### [v4.7.0](https://github.com/DEFRA/water-abstraction-helpers/compare/v4.6.2...v4.7.0)

> 14 April 2022

- Water 3649 investigate task for upgrading wrls helper [`#171`](https://github.com/DEFRA/water-abstraction-helpers/pull/171)
- Water 3649 investigate task for upgrading wrls helper [`#170`](https://github.com/DEFRA/water-abstraction-helpers/pull/170)

#### [v4.6.2](https://github.com/DEFRA/water-abstraction-helpers/compare/v4.1.3...v4.6.2)

> 14 April 2022

- Water 3649 investigate task for upgrading wrls helper [`#169`](https://github.com/DEFRA/water-abstraction-helpers/pull/169)
- Water 3649 investigate task for upgrading wrls helper [`#168`](https://github.com/DEFRA/water-abstraction-helpers/pull/168)
- Water 3649 investigate task for upgrading wrls helper [`#167`](https://github.com/DEFRA/water-abstraction-helpers/pull/167)
- feat: update packages [`#166`](https://github.com/DEFRA/water-abstraction-helpers/pull/166)
- Update reducer.js [`#162`](https://github.com/DEFRA/water-abstraction-helpers/pull/162)
- Water 3177 - Copying Digitise data to core database [`#161`](https://github.com/DEFRA/water-abstraction-helpers/pull/161)
- Upgrades syntax to joi 17 [`#158`](https://github.com/DEFRA/water-abstraction-helpers/pull/158)
- Export getIntersection method [`#156`](https://github.com/DEFRA/water-abstraction-helpers/pull/156)
- Chore/remove https proxy agent [`#147`](https://github.com/DEFRA/water-abstraction-helpers/pull/147)
- Fixes issue in billable days calculation when abs period ends on 1 April [`#146`](https://github.com/DEFRA/water-abstraction-helpers/pull/146)
- Adds a function to map pg.pool queries to knex.raw [`#138`](https://github.com/DEFRA/water-abstraction-helpers/pull/138)
- Moves validation logic to first field of pair to assist with UI [`#137`](https://github.com/DEFRA/water-abstraction-helpers/pull/137)
- [Security] Bump codecov from 3.7.0 to 3.8.1 [`#134`](https://github.com/DEFRA/water-abstraction-helpers/pull/134)
- Bump eslint-plugin-standard from 4.0.1 to 4.1.0 [`#135`](https://github.com/DEFRA/water-abstraction-helpers/pull/135)
- Create shared address validator [`#136`](https://github.com/DEFRA/water-abstraction-helpers/pull/136)
- Water-2803 - Get season for abstraction period [`#128`](https://github.com/DEFRA/water-abstraction-helpers/pull/128)
- Feat/winter 2020 return cycle due date [`#123`](https://github.com/DEFRA/water-abstraction-helpers/pull/123)
- Chore/2665 move import to import module [`#112`](https://github.com/DEFRA/water-abstraction-helpers/pull/112)
- Feature/add pre request event [`#98`](https://github.com/DEFRA/water-abstraction-helpers/pull/98)
- Updates dependencies [`#84`](https://github.com/DEFRA/water-abstraction-helpers/pull/84)
- Adds schema which currently exists in UI repo [`d577e04`](https://github.com/DEFRA/water-abstraction-helpers/commit/d577e046dfc2128cbe29b429da587aca24f965e9)
- new version to publish [`5981990`](https://github.com/DEFRA/water-abstraction-helpers/commit/59819905987d06aadf1f1684f3d7724b8e1d17e4)
- Feat: Adds preRequest hook to http.request [`b6a1d76`](https://github.com/DEFRA/water-abstraction-helpers/commit/b6a1d764b1d793f9d655e3bb48d20bd42685f045)
- Feat: Moves code from water service to helpers [`273bf0d`](https://github.com/DEFRA/water-abstraction-helpers/commit/273bf0d6e5156f2d2e5d47e2e6bdacf15d652bb1)
- WIP [`cc43d7b`](https://github.com/DEFRA/water-abstraction-helpers/commit/cc43d7bfa1931cfd0c3b16174ac95c92bcedb79d)
- Updates formatting functions [`76a5edc`](https://github.com/DEFRA/water-abstraction-helpers/commit/76a5edc503b7e5247e907e9baad78d4d0d448bfc)
- WIP [`114d7dd`](https://github.com/DEFRA/water-abstraction-helpers/commit/114d7dd4967286405d30111e85e8e0a18fd4b01b)
- feat/2803 [`fa455b4`](https://github.com/DEFRA/water-abstraction-helpers/commit/fa455b496145f0119f74e5e6afd32f5bf7a84222)
- Cleaning up [`f05818c`](https://github.com/DEFRA/water-abstraction-helpers/commit/f05818cb1e6d4c9cf679ce2e49797b605e690e5d)
- Fix linter errors, bump version [`6adaf88`](https://github.com/DEFRA/water-abstraction-helpers/commit/6adaf887c8a702b7f7b59ba00a24d7d4413cd008)
- Swapping out for a new CI. [`db0d575`](https://github.com/DEFRA/water-abstraction-helpers/commit/db0d57543760dfaeefde3a2c7b8d7ae0fc418c38)
- Review comments [`c543c3f`](https://github.com/DEFRA/water-abstraction-helpers/commit/c543c3f729041ddadf17a1d64fd799b9f726dfe7)
- Add due date to return cycles.  Add custom date for winter/all year 2020 cycle [`2758d74`](https://github.com/DEFRA/water-abstraction-helpers/commit/2758d74bf4ef82fa1ce4ae9f87a8eedd6d068543)
- Add missing deps [`c3be901`](https://github.com/DEFRA/water-abstraction-helpers/commit/c3be901b897b1460edd1b85cf2e636599acc1406)
- Remove https-proxy-agent [`b0276ec`](https://github.com/DEFRA/water-abstraction-helpers/commit/b0276ec0acacd5f042b4217cd5bc1571fdac6c6d)
- WIP [`a6d9ea6`](https://github.com/DEFRA/water-abstraction-helpers/commit/a6d9ea6ce91721a43b31400f9e525b0ef2aedaf4)
- feat/water-2803 [`709a877`](https://github.com/DEFRA/water-abstraction-helpers/commit/709a877d25fecd55f81e918f63c33db4b3442eab)
- Change version number [`766f7dd`](https://github.com/DEFRA/water-abstraction-helpers/commit/766f7dd81d5383ee0e87ec9605d332bbbeb92cce)
- Supports WATER-3177 [`0ef95a1`](https://github.com/DEFRA/water-abstraction-helpers/commit/0ef95a17ab0d678c8d17b0c469f57c9f20913fbd)
- Clean-up [`b6e6e03`](https://github.com/DEFRA/water-abstraction-helpers/commit/b6e6e03c56b1550904ca484339ad642764596059)
- Cleaning up [`fa93425`](https://github.com/DEFRA/water-abstraction-helpers/commit/fa93425bd72704f5f1a1db06c92fbd04f02535df)
- WIP [`6c1df4c`](https://github.com/DEFRA/water-abstraction-helpers/commit/6c1df4c8efb46234f9896280fc8b66fbf9fb56b7)
- Parse billing period dates with Moment.js [`758c254`](https://github.com/DEFRA/water-abstraction-helpers/commit/758c2547214aebc5a6ebf3ba50abfbc450b6a5b5)
- Filter out empty objects [`3e05613`](https://github.com/DEFRA/water-abstraction-helpers/commit/3e05613c71ed125bffa2a364df89ba76af3bbce6)
- WIP [`37eb401`](https://github.com/DEFRA/water-abstraction-helpers/commit/37eb401e975f4aaeae3213d6672107c1a5c11cee)
- WIP [`d8c10ae`](https://github.com/DEFRA/water-abstraction-helpers/commit/d8c10ae2ff74a12e3eff73a9e3c6784558540526)
- Additional test [`7fb5ac1`](https://github.com/DEFRA/water-abstraction-helpers/commit/7fb5ac116a6a8f92efdd4eeb1541471c57469d2d)
- Fix lint error [`792b19f`](https://github.com/DEFRA/water-abstraction-helpers/commit/792b19fb08478ba976788c1e5a349b55633643d3)
- Patch version number [`293ef58`](https://github.com/DEFRA/water-abstraction-helpers/commit/293ef583118e3fa744758f5d62870e19a06db6e1)
- WIP [`1945c30`](https://github.com/DEFRA/water-abstraction-helpers/commit/1945c30677b3f01e5bfe23f0f0b09084cfba4619)
- Add coverage to gitignore [`d4a3194`](https://github.com/DEFRA/water-abstraction-helpers/commit/d4a3194e72fe4ab45dfd9294d580e91a8ae68639)
- Update state-manager.js [`c1f68bd`](https://github.com/DEFRA/water-abstraction-helpers/commit/c1f68bdc19bd22eced9b42b2c5a040580682435d)
- Update state-manager.js [`fffd768`](https://github.com/DEFRA/water-abstraction-helpers/commit/fffd7689e06cffec56e9cf6f53ea85421a937288)
- Added global variables that need to be ignored from leak detection [`38ee943`](https://github.com/DEFRA/water-abstraction-helpers/commit/38ee94385953c7f7e657a2939cfd461e0e5e2537)
- Change test runner syntax [`fd44d29`](https://github.com/DEFRA/water-abstraction-helpers/commit/fd44d297457527899cee416d07034a63755d762c)
- Update ci.yml [`38bcaee`](https://github.com/DEFRA/water-abstraction-helpers/commit/38bcaee09f4393a731523e4e7ea7de33ee154ee6)
- feat/water-2803 [`d0fc91a`](https://github.com/DEFRA/water-abstraction-helpers/commit/d0fc91a370fc0749034dc58aa6ba09575b121335)
- feat/water-2803 [`c378694`](https://github.com/DEFRA/water-abstraction-helpers/commit/c3786942f774dfc072ce43197f5a8aafb698f55c)

#### [v4.1.3](https://github.com/DEFRA/water-abstraction-helpers/compare/v4.0.1...v4.1.3)

> 19 December 2019

- Chore/optional pg boss [`#83`](https://github.com/DEFRA/water-abstraction-helpers/pull/83)
- Create postgres pool factory [`#82`](https://github.com/DEFRA/water-abstraction-helpers/pull/82)
- Validation improvements for isDateWithinAbstractionPeriod [`#80`](https://github.com/DEFRA/water-abstraction-helpers/pull/80)
- Updates dependencies [`fb6e572`](https://github.com/DEFRA/water-abstraction-helpers/commit/fb6e57285107416e7336cfb06d68b1d29b2b5e56)
- Only require PG boss when hapi-pg-boss plugin is registered [`d1382cc`](https://github.com/DEFRA/water-abstraction-helpers/commit/d1382cc87e954f9fdb51e28684c3c4504cf5b0fc)

### [v4.0.1](https://github.com/DEFRA/water-abstraction-helpers/compare/v3.3.0...v4.0.1)

> 9 December 2019

- Adds hapi pg boss plugin [`#78`](https://github.com/DEFRA/water-abstraction-helpers/pull/78)
- Weekly split logs test [`#74`](https://github.com/DEFRA/water-abstraction-helpers/pull/74)
- Move isDateWithinAbstractionPeriod function from UI to Helpers [`#73`](https://github.com/DEFRA/water-abstraction-helpers/pull/73)
- Feat/merge history [`#72`](https://github.com/DEFRA/water-abstraction-helpers/pull/72)
- Feat/date range splitter [`#71`](https://github.com/DEFRA/water-abstraction-helpers/pull/71)
- Adds functions to get total and billable days for charging [`#70`](https://github.com/DEFRA/water-abstraction-helpers/pull/70)
- Add validation to isDateWithinAbstractionPeriod function, and convert strings to integers in supplied abstraction period [`6109bee`](https://github.com/DEFRA/water-abstraction-helpers/commit/6109bee04796eb54b5d8cb8957ddbbc55ff88f67)
- Add test for weekly split logs [`ee12cb0`](https://github.com/DEFRA/water-abstraction-helpers/commit/ee12cb00b1420596d4ab4db9e2643a9a0e5a227f)
- Fix year in test to be consistent [`85685ad`](https://github.com/DEFRA/water-abstraction-helpers/commit/85685ad44e636507fc0475b6f4a17c26a0a829fb)
- Tweak changelog [`bf27ec9`](https://github.com/DEFRA/water-abstraction-helpers/commit/bf27ec9a963352469debcf6a06719d892fcbbe76)

### [v3.3.0](https://github.com/DEFRA/water-abstraction-helpers/compare/v2.3.0...v3.3.0)

> 3 October 2019

- Helps avoid the same month appearing in both parts of a split log [`#66`](https://github.com/DEFRA/water-abstraction-helpers/pull/66)
- Feat: Adds PUT to service request [`#57`](https://github.com/DEFRA/water-abstraction-helpers/pull/57)
- Feat: Prevent singleton loggers [`#43`](https://github.com/DEFRA/water-abstraction-helpers/pull/43)
- Chore: Update eslint and add ignore file [`#38`](https://github.com/DEFRA/water-abstraction-helpers/pull/38)
- Update version number to 2.5.0 [`#39`](https://github.com/DEFRA/water-abstraction-helpers/pull/39)
- Add partial period flag to required lines for monthly split log returns [`#37`](https://github.com/DEFRA/water-abstraction-helpers/pull/37)
- Feat/return period end [`#35`](https://github.com/DEFRA/water-abstraction-helpers/pull/35)
- Adds functions to get total and billable days for charging [`1c1061b`](https://github.com/DEFRA/water-abstraction-helpers/commit/1c1061b69c63106345a651fc624009388f11c431)
- Use moment range for billable days calculation [`0c79193`](https://github.com/DEFRA/water-abstraction-helpers/commit/0c79193ff50a6a42f615fe1c2a6d78d0620ece44)
- Change use of 'isPartialPeriod' to 'isLastDayOfMonth' for clarity. Add tests. [`6732dfc`](https://github.com/DEFRA/water-abstraction-helpers/commit/6732dfc5d5fe2ef21637f66d9fb03444716c5b86)
- Add additional tests [`3c80ff0`](https://github.com/DEFRA/water-abstraction-helpers/commit/3c80ff02dd0126f7e05af1990681a4283d6afa3c)
- Add logic to check if return is for partial period [`3bd0460`](https://github.com/DEFRA/water-abstraction-helpers/commit/3bd04607eddbb9b332eb56b5e0829d41db24884d)
- Add additional tests [`612f2ef`](https://github.com/DEFRA/water-abstraction-helpers/commit/612f2efbaa43e4de801d0fafc6541c24eb3773dc)
- Refactored code based on comments [`8e41522`](https://github.com/DEFRA/water-abstraction-helpers/commit/8e415228938ae65834d179a7303c2f01d573b41c)

#### [v2.3.0](https://github.com/DEFRA/water-abstraction-helpers/compare/v2.2.0...v2.3.0)

> 22 March 2019

- Feat/service request [`#24`](https://github.com/DEFRA/water-abstraction-helpers/pull/24)

#### [v2.2.0](https://github.com/DEFRA/water-abstraction-helpers/compare/v2.1.0...v2.2.0)

> 1 March 2019

- Feat: Export recently added modules [`#14`](https://github.com/DEFRA/water-abstraction-helpers/pull/14)

#### [v2.1.0](https://github.com/DEFRA/water-abstraction-helpers/compare/v2.0.0...v2.1.0)

> 27 February 2019

- Feat: Move duplicate returns lines functions [`#12`](https://github.com/DEFRA/water-abstraction-helpers/pull/12)

### [v2.0.0](https://github.com/DEFRA/water-abstraction-helpers/compare/v1.1.0...v2.0.0)

> 18 February 2019

- Feat: Improves error object decoration [`#9`](https://github.com/DEFRA/water-abstraction-helpers/pull/9)

#### v1.1.0

> 15 February 2019

- Feat: Logging enhancements [`#6`](https://github.com/DEFRA/water-abstraction-helpers/pull/6)
- Adds getPeriodStart function from water service to calculate the retu… [`#5`](https://github.com/DEFRA/water-abstraction-helpers/pull/5)
- Add function to get region given region code [`#4`](https://github.com/DEFRA/water-abstraction-helpers/pull/4)
- Fixes issue with return cycle calculation [`#3`](https://github.com/DEFRA/water-abstraction-helpers/pull/3)
- Adds a function to create summer or winter return cycles between a gi… [`#2`](https://github.com/DEFRA/water-abstraction-helpers/pull/2)
- Initial commit [`#1`](https://github.com/DEFRA/water-abstraction-helpers/pull/1)
- Adds a function to create summer or winter return cycles between a given date range [`d1da44f`](https://github.com/DEFRA/water-abstraction-helpers/commit/d1da44f6a78dbfe37441ac1bbad1c6bb15dc556a)
- Refactor and add test for airbrake client options [`68bff8a`](https://github.com/DEFRA/water-abstraction-helpers/commit/68bff8a9111ceef040793c9a342c6df33f00be4a)
- Adds getPeriodStart function from water service to calculate the return cycle start date for a given date [`c83cc10`](https://github.com/DEFRA/water-abstraction-helpers/commit/c83cc10489bdee46c83713389bd8ceaceb642263)
- Adds auto changelog [`8827beb`](https://github.com/DEFRA/water-abstraction-helpers/commit/8827beb79e58b7da0d7175adaecd35a3dfa3d581)
- Add further tests [`752a3cd`](https://github.com/DEFRA/water-abstraction-helpers/commit/752a3cd15230f259c6fe341f5688594611e398c7)
- Add travis.yml and eslint config [`8924537`](https://github.com/DEFRA/water-abstraction-helpers/commit/892453703c5e4798287c82039e15eabb253dda4a)
- More tests [`8c9562a`](https://github.com/DEFRA/water-abstraction-helpers/commit/8c9562a8594a61b9efa223b30cda149e47be5901)
- Add licence info [`553a165`](https://github.com/DEFRA/water-abstraction-helpers/commit/553a165a44b03a8c67a82080ecff1353cb329cde)
- Add package.json [`d83c3a3`](https://github.com/DEFRA/water-abstraction-helpers/commit/d83c3a3df5f06b9b6f25a5bab87da7443fb81cf6)
- Add test to cover cycles starting in following year [`9bccf5e`](https://github.com/DEFRA/water-abstraction-helpers/commit/9bccf5e2f84bc0ee4308f2e3a6703d903eec9b53)
- Add readme [`f6ba3c1`](https://github.com/DEFRA/water-abstraction-helpers/commit/f6ba3c1fa1bb7c38c336397d7a676dd27a17e3e7)
- Remove surplus env variables from travis.yml [`aed49f6`](https://github.com/DEFRA/water-abstraction-helpers/commit/aed49f675a95706581feb9b5a60e8a6f4f6d1a93)
- Adds licence file [`59c3e58`](https://github.com/DEFRA/water-abstraction-helpers/commit/59c3e5897b87dc6e7ca8dc85c1b96c8c27ea9395)
- Scope NPM package to @envage with public access [`829e27c`](https://github.com/DEFRA/water-abstraction-helpers/commit/829e27cb7a6b13533c0b5821d6b93a1e5dd8d142)
- Explicitly set return cycle end date to 1 day before 1 year after cycle start date [`9f66215`](https://github.com/DEFRA/water-abstraction-helpers/commit/9f662150c026cc92e65520aea91e258ca8d9e8c9)
- Add codecov [`e07b639`](https://github.com/DEFRA/water-abstraction-helpers/commit/e07b639a1b2f01515d40f209f73ae88d8e7b5028)
